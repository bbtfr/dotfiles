#!/usr/bin/env python3

import os
import shlex
import subprocess
import sys

import click


@click.group
def cli():
    pass


def run_command(commands):
    print("Run Command:", shlex.join(commands), file=sys.stderr)
    code = subprocess.call(commands)
    if code:
        sys.exit(code)


@cli.command
@click.argument("name")
def show(name):
    commands = [
        "security",
        "find-generic-password",
        "-w",
        "-a",
        os.getlogin(),
        "-s",
        name,
    ]
    run_command(commands)


if __name__ == "__main__":
    cli()
